plugins {
    id 'java'
    id "io.freefair.lombok" version "5.0.0-rc4"
}

group 'com.senior_design'
version '1.0-SNAPSHOT'

sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

dependencies {
    compile group: 'com.google.code.gson', name: 'gson', version: '2.8.6'
    compile group: 'net.sourceforge.argparse4j', name: 'argparse4j', version: '0.8.1'
    compile group: 'org.apache.pdfbox', name: 'pdfbox', version: '2.0.19'
    compile group: 'org.openpnp', name: 'opencv', version: '3.4.2-2'
    compile group: 'org.apache.solr', name: 'solr-solrj', version: '8.1.0'
    compile group: 'org.slf4j', name: 'slf4j-simple', version: '1.7.25'
}

task fatJar(type: Jar) {
    manifest {
        attributes 'Implementation-Title': 'Senior Design File Watching Program',
                'Implementation-Version': version,
                'Main-Class': 'com.senior_design.filewatcher.Main'
    }
    archiveName = "FileWatcher.jar"
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
    with jar
}

task fullBuild(type: Copy) {
    from fatJar
    into "./bin/"
}
